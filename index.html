<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Details Form</title>
    <!-- Tailwind CSS CDN for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the body and container */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top for scrolling if content is long */
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: #ffffff; /* White background for the main card */
            padding: 32px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 700px; /* Wider for professional layout */
            text-align: center;
            border: 1px solid #e5e7eb;
        }

        h1 {
            color: #1f2937;
            margin-bottom: 24px;
            font-weight: 700;
            font-size: 2.25rem; /* Larger main title */
        }

        .section-card {
            background-color: #ffffff;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            padding: 24px;
            margin-bottom: 20px;
            text-align: left;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .section-card h2 {
            font-size: 1.5rem; /* Section titles */
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #10b981; /* Green line under section title */
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        @media (min-width: 640px) { /* Small screens and up */
            .form-grid {
                grid-template-columns: 1fr 1fr; /* Two columns for larger screens */
            }
            .form-grid.full-width > div { /* For single column fields like address */
                grid-column: span 2;
            }
        }

        label {
            display: block;
            margin-bottom: 6px;
            color: #4b5563;
            font-weight: 500;
            font-size: 0.9rem;
        }

        input[type="text"],
        input[type="email"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 0.95rem;
            color: #374151;
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
        }

        button[type="submit"] {
            background-color: #10b981; /* Green submit button */
            color: white;
            padding: 12px 28px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 600;
            margin-top: 24px;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
        }

        button[type="submit"]:hover {
            background-color: #059669; /* Darker green on hover */
            transform: translateY(-1px);
        }

        button[type="submit"]:active {
            transform: translateY(0);
        }

        #imageResult {
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }

        #generatedImage {
            max-width: 100%;
            height: auto;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            margin-top: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }

        /* Styles for the hidden div that will be converted to an image */
        #imageSource {
            background-color: #ffffff;
            padding: 20px; /* Reduced padding for A4 look */
            text-align: left;
            color: #1f2937;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
            width: 794px; /* A4 width at 96 DPI */
            min-height: 1123px; /* A4 height at 96 DPI */
            box-sizing: border-box;
            position: absolute;
            left: -9999px;
            top: -9999px;
            height: auto;
            overflow: hidden;
            font-size: 0.8rem; /* Very small base font size for A4 */
            line-height: 1.3; /* Tighter line height */
            border: 1px solid #000; /* Overall border for the A4 page */
        }

        #imageSource .image-main-title {
            width: 100%;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid #000;
        }

        #imageSource .hr-details {
            display: flex;
            width: 100%;
            margin-bottom: 10px;
            font-size: 0.75rem;
        }
        #imageSource .hr-details div {
            flex: 1;
            padding: 5px 0;
            border: 1px solid #000;
            border-right: none;
            text-align: center;
        }
        #imageSource .hr-details div:last-child {
            border-right: 1px solid #000;
        }

        #imageSource .image-section {
            width: 100%;
            margin-bottom: 10px;
            border: 1px solid #000;
        }

        #imageSource .image-section-title {
            background-color: #e0e0e0;
            padding: 5px 10px;
            font-weight: bold;
            font-size: 0.9rem;
            border-bottom: 1px solid #000;
        }

        #imageSource .image-section-content {
            padding: 5px 10px;
        }

        #imageSource .image-row {
            display: flex;
            width: 100%;
            border-bottom: 1px solid #e0e0e0; /* Light border for rows */
        }
        #imageSource .image-row:last-child {
            border-bottom: none;
        }

        #imageSource .image-cell {
            flex: 1;
            padding: 5px;
            border-right: 1px solid #e0e0e0; /* Light border for cells */
            display: flex;
            align-items: center;
            font-size: 0.8rem;
        }
        #imageSource .image-cell:last-child {
            border-right: none;
        }

        #imageSource .image-cell.half {
            flex: 0.5; /* For two-column layout */
        }
        #imageSource .image-cell.quarter {
            flex: 0.25; /* For four-column layout */
        }
        #imageSource .image-cell.third {
            flex: 0.333; /* For three-column layout */
        }
        #imageSource .image-cell.full {
            flex: 1;
        }

        #imageSource .image-label {
            font-weight: 500;
            margin-right: 5px;
            white-space: nowrap; /* Prevent label from wrapping */
        }

        #imageSource .image-value {
            flex: 1;
            word-wrap: break-word; /* Allow values to wrap */
        }

        #imageSource .photo-box {
            width: 120px;
            height: 150px;
            border: 1px solid #000;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.9rem;
            color: #555;
            margin-left: auto; /* Push to right */
            margin-bottom: 10px;
        }

        #imageSource .language-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 0.8rem;
        }
        #imageSource .language-table th,
        #imageSource .language-table td {
            border: 1px solid #000;
            padding: 5px;
            text-align: center;
        }
        #imageSource .language-table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="flex justify-end mb-4">
            <button id="langToggle" class="bg-gray-200 text-gray-800 hover:bg-gray-300 px-4 py-2 rounded-md text-sm">Switch to Hindi</button>
        </div>
        <h1 id="mainTitle" class="text-4xl font-extrabold text-blue-800">Personal Details Form</h1>

        <form id="dataForm">
            <!-- Employee Details Section -->
            <div class="section-card">
                <h2 id="sectionTitleEmployee">Employee Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label id="labelEmployeeName" for="employeeName">Name:</label>
                        <input type="text" id="employeeName" name="employeeName" placeholder="Enter employee name" required>
                    </div>
                    <div class="form-group">
                        <label id="labelFatherName" for="fatherName">Father Name:</label>
                        <input type="text" id="fatherName" name="fatherName" placeholder="Enter father's name" required>
                    </div>
                    <div class="form-group">
                        <label id="labelDateOfBirth" for="dateOfBirth">Date of Birth:</label>
                        <input type="date" id="dateOfBirth" name="dateOfBirth" required>
                    </div>
                    <div class="form-group">
                        <label id="labelAge" for="age">Age:</label>
                        <input type="number" id="age" name="age" min="18" max="100" placeholder="e.g., 30" required>
                    </div>
                    <div class="form-group">
                        <label id="labelAreaOfService" for="areaOfService">Area of Service:</label>
                        <input type="text" id="areaOfService" name="areaOfService" placeholder="e.g., Sales" required>
                    </div>
                    <div class="form-group">
                        <label id="labelCaste" for="caste">Caste:</label>
                        <input type="text" id="caste" name="caste" placeholder="Enter caste" required>
                    </div>
                    <div class="form-group">
                        <label id="labelBloodGroup" for="bloodGroup">Blood Group:</label>
                        <input type="text" id="bloodGroup" name="bloodGroup" placeholder="e.g., A+" required>
                    </div>
                    <div class="form-group">
                        <label id="labelReligion" for="religion">Religion:</label>
                        <input type="text" id="religion" name="religion" placeholder="e.g., Hindu" required>
                    </div>
                    <div class="form-group">
                        <label id="labelGender" for="gender">Gender:</label>
                        <select id="gender" name="gender" required>
                            <option value="">Select</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label id="labelMaritalStatus" for="maritalStatus">Marital Status:</label>
                        <select id="maritalStatus" name="maritalStatus" required>
                            <option value="">Select</option>
                            <option value="single">Single</option>
                            <option value="married">Married</option>
                            <option value="divorced">Divorced</option>
                            <option value="widowed">Widowed</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label id="labelWorkExperience" for="workExperience">Work Experience:</label>
                        <textarea id="workExperience" name="workExperience" rows="2" placeholder="e.g., 2 years in Sales" required></textarea>
                    </div>
                    <div class="form-group">
                        <label id="labelContactNo" for="contactNo">Contact No:</label>
                        <input type="text" id="contactNo" name="contactNo" placeholder="e.g., 9876543210" required pattern="[0-9]{10}">
                    </div>
                    <div class="form-group">
                        <label id="labelPersonalEmailId" for="personalEmailId">Personal Email ID:</label>
                        <input type="email" id="personalEmailId" name="personalEmailId" placeholder="e.g., email@example.com" required>
                    </div>
                    <div class="form-group full-width">
                        <label id="labelPresentAddress" for="presentAddress">Present Address:</label>
                        <textarea id="presentAddress" name="presentAddress" rows="2" placeholder="Enter present address" required></textarea>
                    </div>
                    <div class="form-group full-width">
                        <label id="labelPermanentAddress" for="permanentAddress">Permanent Address:</label>
                        <textarea id="permanentAddress" name="permanentAddress" rows="2" placeholder="Enter permanent address" required></textarea>
                    </div>
                </div>
            </div>

            <!-- Emergency Contact Details Section -->
            <div class="section-card">
                <h2 id="sectionTitleEmergency">Emergency Contact Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label id="labelECFullName" for="ecFullName">Full Name:</label>
                        <input type="text" id="ecFullName" name="ecFullName" placeholder="e.g., Jane Doe" required>
                    </div>
                    <div class="form-group">
                        <label id="labelECRelationship" for="ecRelationship">Relationship:</label>
                        <input type="text" id="ecRelationship" name="ecRelationship" placeholder="e.g., Spouse" required>
                    </div>
                    <div class="form-group full-width">
                        <label id="labelECAddress" for="ecAddress">Address:</label>
                        <textarea id="ecAddress" name="ecAddress" rows="2" placeholder="Enter emergency contact address" required></textarea>
                    </div>
                    <div class="form-group">
                        <label id="labelECContactNo" for="ecContactNo">Contact No:</label>
                        <input type="text" id="ecContactNo" name="ecContactNo" placeholder="e.g., 9876543210" required pattern="[0-9]{10}">
                    </div>
                    <div class="form-group">
                        <label id="labelECNote" for="ecNote">Note:</label>
                        <input type="text" id="ecNote" name="ecNote" placeholder="Any special notes">
                    </div>
                </div>
            </div>

            <!-- Post Details Section -->
            <div class="section-card">
                <h2 id="sectionTitlePost">Post Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label id="labelLocation" for="location">Location:</label>
                        <input type="text" id="location" name="location" placeholder="e.g., Delhi" required>
                    </div>
                    <div class="form-group">
                        <label id="labelDepartment" for="department">Department:</label>
                        <input type="text" id="department" name="department" placeholder="e.g., HR" required>
                    </div>
                    <div class="form-group">
                        <label id="labelJobDesignation" for="jobDesignation">Job Designation:</label>
                        <input type="text" id="jobDesignation" name="jobDesignation" placeholder="e.g., Manager" required>
                    </div>
                    <div class="form-group">
                        <label id="labelJoiningDate" for="joiningDate">Joining Date:</label>
                        <input type="date" id="joiningDate" name="joiningDate" required>
                    </div>
                    <div class="form-group">
                        <label id="labelCompanyId" for="companyId">Company ID:</label>
                        <input type="text" id="companyId" name="companyId" placeholder="e.g., C12345" required>
                    </div>
                    <div class="form-group">
                        <label id="labelSkypeId" for="skypeId">Skype ID:</label>
                        <input type="text" id="skypeId" name="skypeId" placeholder="e.g., live:john.doe">
                    </div>
                    <div class="form-group full-width">
                        <label id="labelTechnicalSkills" for="technicalSkills">Technical Skills:</label>
                        <textarea id="technicalSkills" name="technicalSkills" rows="2" placeholder="e.g., JavaScript, Python, SQL"></textarea>
                    </div>
                </div>
            </div>

            <!-- Bank Details Section -->
            <div class="section-card">
                <h2 id="sectionTitleBank">Bank Details - Please ensure that you have a completed and SIGNED form</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label id="labelAccountHoldersName" for="accountHoldersName">Account Holders Name:</label>
                        <input type="text" id="accountHoldersName" name="accountHoldersName" placeholder="Enter account holder's name" required>
                    </div>
                    <div class="form-group">
                        <label id="labelAccountNumber" for="accountNumber">Account Number:</label>
                        <input type="text" id="accountNumber" name="accountNumber" placeholder="Enter account number" required>
                    </div>
                    <div class="form-group">
                        <label id="labelNameOfBank" for="nameOfBank">Name of Bank:</label>
                        <input type="text" id="nameOfBank" name="nameOfBank" placeholder="Enter bank name" required>
                    </div>
                    <div class="form-group">
                        <label id="labelBankAccountType" for="bankAccountType">Bank Account Type:</label>
                        <input type="text" id="bankAccountType" name="bankAccountType" placeholder="e.g., Savings, Current" required>
                    </div>
                    <div class="form-group">
                        <label id="labelBranchCity" for="branchCity">Branch (City):</label>
                        <input type="text" id="branchCity" name="branchCity" placeholder="Enter branch city" required>
                    </div>
                    <div class="form-group">
                        <label id="labelPanNo" for="panNo">Pan No:</label>
                        <input type="text" id="panNo" name="panNo" placeholder="Enter PAN number" required pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}" title="Please enter a valid 10-character PAN (e.g., ABCDE1234F)">
                    </div>
                    <div class="form-group">
                        <label id="labelBranchCodeIFSCNo" for="branchCodeIFSCNo">Branch Code (IFSC) No:</label>
                        <input type="text" id="branchCodeIFSCNo" name="branchCodeIFSCNo" placeholder="Enter IFSC code" required pattern="[A-Z]{4}0[A-Z0-9]{6}" title="Please enter a valid IFSC code (e.g., ABCD0123456)">
                    </div>
                </div>
            </div>

            <!-- Work Experience Details Section -->
            <div class="section-card">
                <h2 id="sectionTitleWorkExperience">Work Experience Details</h2>
                <div class="form-grid full-width">
                    <div class="form-group">
                        <label id="labelDuration" for="duration">DURATION (Year To Year/Month):</label>
                        <input type="text" id="duration" name="duration" placeholder="e.g., 2018-2020">
                    </div>
                    <div class="form-group">
                        <label id="labelCompany" for="company">COMPANY (Name & Place):</label>
                        <input type="text" id="company" name="company" placeholder="e.g., ABC Corp, Delhi">
                    </div>
                    <div class="form-group">
                        <label id="labelDesignation" for="designation">DESIGNATION (Last):</label>
                        <input type="text" id="designation" name="designation" placeholder="e.g., Senior Developer">
                    </div>
                    <div class="form-group">
                        <label id="labelLastGrossSalary" for="lastGrossSalary">LAST GROSS SALARY:</label>
                        <input type="text" id="lastGrossSalary" name="lastGrossSalary" placeholder="e.g., ₹50,000">
                    </div>
                    <div class="form-group">
                        <label id="labelReasonsForLeaving" for="reasonsForLeaving">REASONS FOR LEAVING:</label>
                        <input type="text" id="reasonsForLeaving" name="reasonsForLeaving" placeholder="e.g., Better opportunity">
                    </div>
                </div>
            </div>

            <!-- Reference Contact Details Section -->
            <div class="section-card">
                <h2 id="sectionTitleReference">Reference Contact Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label id="labelRefName" for="refName">Name:</label>
                        <input type="text" id="refName" name="refName" placeholder="Enter reference name">
                    </div>
                    <div class="form-group">
                        <label id="labelRefCompany" for="refCompany">Company:</label>
                        <input type="text" id="refCompany" name="refCompany" placeholder="Enter reference company">
                    </div>
                    <div class="form-group full-width">
                        <label id="labelRefAddress" for="refAddress">Address:</label>
                        <textarea id="refAddress" name="refAddress" rows="2" placeholder="Enter reference address"></textarea>
                    </div>
                    <div class="form-group">
                        <label id="labelRefPost" for="refPost">Post:</label>
                        <input type="text" id="refPost" name="refPost" placeholder="Enter reference post">
                    </div>
                    <div class="form-group">
                        <label id="labelRefTelephoneNumber" for="refTelephoneNumber">Telephone Number:</label>
                        <input type="text" id="refTelephoneNumber" name="refTelephoneNumber" placeholder="e.g., 011-12345678">
                    </div>
                    <div class="form-group">
                        <label id="labelRefContactNo" for="refContactNo">Contact No:</label>
                        <input type="text" id="refContactNo" name="refContactNo" placeholder="e.g., 9876543210" pattern="[0-9]{10}">
                    </div>
                </div>
            </div>

            <!-- Understanding of Language Section -->
            <div class="section-card">
                <h2 id="sectionTitleLanguage">Understanding of Language</h2>
                <div class="form-grid full-width">
                    <div class="form-group">
                        <label id="labelLanguageEnglish" for="languageEnglishRead">English (Read):</label>
                        <input type="checkbox" id="languageEnglishRead" name="languageEnglishRead" value="yes">
                        <label id="labelLanguageEnglishWrite" for="languageEnglishWrite">Write:</label>
                        <input type="checkbox" id="languageEnglishWrite" name="languageEnglishWrite" value="yes">
                        <label id="labelLanguageEnglishSpeak" for="languageEnglishSpeak" class="ml-2">Speak:</label>
                        <input type="checkbox" id="languageEnglishSpeak" name="languageEnglishSpeak" value="yes">
                    </div>
                    <div class="form-group">
                        <label id="labelLanguageNepali" for="languageNepaliRead">Nepali (Read):</label>
                        <input type="checkbox" id="languageNepaliRead" name="languageNepaliRead" value="yes">
                        <label id="labelLanguageNepaliWrite" for="languageNepaliWrite">Write:</label>
                        <input type="checkbox" id="languageNepaliWrite" name="languageNepaliWrite" value="yes">
                        <label id="labelLanguageNepaliSpeak" for="languageNepaliSpeak" class="ml-2">Speak:</label>
                        <input type="checkbox" id="languageNepaliSpeak" name="languageNepaliSpeak" value="yes">
                    </div>
                    <div class="form-group">
                        <label id="labelLanguageHindi" for="languageHindiRead">Hindi (Read):</label>
                        <input type="checkbox" id="languageHindiRead" name="languageHindiRead" value="yes">
                        <label id="labelLanguageHindiWrite" for="languageHindiWrite">Write:</label>
                        <input type="checkbox" id="languageHindiWrite" name="languageHindiWrite" value="yes">
                        <label id="labelLanguageHindiSpeak" for="languageHindiSpeak" class="ml-2">Speak:</label>
                        <input type="checkbox" id="languageHindiSpeak" name="languageHindiSpeak" value="yes">
                    </div>
                </div>
            </div>


            <button id="submitBtn" type="submit">Submit Form</button>
        </form>

        <div id="imageResult" class="hidden">
            <h2 id="imagePreviewTitle" class="text-2xl font-semibold mt-8 text-gray-800">Generated Form Image:</h2>
            <img id="generatedImage" src="" alt="Generated Form Image" class="mt-5">
            <a id="downloadImage" href="#" download="personal_details_form.png" class="inline-block mt-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 ease-in-out transform hover:scale-105">
                Download Image
            </a>
        </div>
    </div>

    <!-- This hidden div will be used by html2canvas to create the image -->
    <div id="imageSource">
        <div class="image-main-title" id="imageSourceMainTitle">PERSONAL DETAILS FORM</div>
        <div class="hr-details">
            <div id="hrToComplete">TO BE COMPLETED BY HR</div>
            <div id="employeeCode">Employee Code:</div>
        </div>

        <!-- Content for image generation will be dynamically added here -->
        <div id="imageSourceContent"></div>
    </div>

    <!-- html2canvas library from CDN -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <script>
        // Language translations
        const translations = {
            en: {
                mainTitle: "Personal Details Form",
                hrToComplete: "TO BE COMPLETED BY HR",
                employeeCode: "Employee Code:",

                sectionTitleEmployee: "EMPLOYEE DETAILS",
                labelEmployeeName: "Name:",
                placeholderEmployeeName: "Enter employee name",
                labelFatherName: "Father Name:",
                placeholderFatherName: "Enter father's name",
                labelDateOfBirth: "Date of Birth:",
                labelAge: "Age:",
                placeholderAge: "e.g., 30",
                labelAreaOfService: "Area of Service:",
                placeholderAreaOfService: "e.g., Sales",
                labelCaste: "Caste:",
                placeholderCaste: "Enter caste",
                labelBloodGroup: "Blood Group:",
                placeholderBloodGroup: "e.g., A+",
                labelReligion: "Religion:",
                placeholderReligion: "e.g., Hindu",
                labelGender: "Gender:",
                optionSelect: "Select",
                optionMale: "Male",
                optionFemale: "Female",
                optionOther: "Other",
                labelMaritalStatus: "Marital Status:",
                optionSingle: "Single",
                optionMarried: "Married",
                optionDivorced: "Divorced",
                optionWidowed: "Widowed",
                labelWorkExperience: "Work Experience:",
                placeholderWorkExperience: "e.g., 2 years in Sales",
                labelContactNo: "Contact No:",
                placeholderContactNo: "e.g., 9876543210",
                labelPersonalEmailId: "Personal Email ID:",
                placeholderPersonalEmailId: "e.g., email@example.com",
                labelPresentAddress: "Present Address:",
                placeholderPresentAddress: "Enter present address",
                labelPermanentAddress: "Permanent Address:",
                placeholderPermanentAddress: "Enter permanent address",

                sectionTitleEmergency: "EMERGENCY CONTACT DETAILS",
                labelECFullName: "Full Name:",
                placeholderECFullName: "e.g., Jane Doe",
                labelECRelationship: "Relationship:",
                placeholderECRelationship: "e.g., Spouse",
                labelECAddress: "Address:",
                placeholderECAddress: "Enter emergency contact address",
                labelECContactNo: "Contact No:",
                placeholderECContactNo: "e.g., 9876543210",
                labelECNote: "Note:",
                placeholderECNote: "Any special notes",

                sectionTitlePost: "POST DETAILS",
                labelLocation: "Location:",
                placeholderLocation: "e.g., Delhi",
                labelDepartment: "Department:",
                placeholderDepartment: "e.g., HR",
                labelJobDesignation: "Job Designation:",
                placeholderJobDesignation: "e.g., Manager",
                labelJoiningDate: "Joining Date:",
                labelCompanyId: "Company ID:",
                placeholderCompanyId: "e.g., C12345",
                labelSkypeId: "Skype ID:",
                placeholderSkypeId: "e.g., live:john.doe",
                labelTechnicalSkills: "Technical Skills:",
                placeholderTechnicalSkills: "e.g., JavaScript, Python, SQL",

                sectionTitleBank: "BANK DETAILS - Please ensure that you have a completed and SIGNED form",
                labelAccountHoldersName: "Account Holders Name:",
                placeholderAccountHoldersName: "Enter account holder's name",
                labelAccountNumber: "Account Number:",
                placeholderAccountNumber: "Enter account number",
                labelNameOfBank: "Name of Bank:",
                placeholderNameOfBank: "Enter bank name",
                labelBankAccountType: "Bank Account Type:",
                placeholderBankAccountType: "e.g., Savings, Current",
                labelBranchCity: "Branch (City):",
                placeholderBranchCity: "Enter branch city",
                labelPanNo: "Pan No:",
                placeholderPanNo: "Enter PAN number",
                labelBranchCodeIFSCNo: "Branch Code (IFSC) No:",
                placeholderBranchCodeIFSCNo: "Enter IFSC code",

                sectionTitleWorkExperience: "WORK EXPERIENCE DETAILS",
                labelDuration: "DURATION (Year To Year/Month):",
                placeholderDuration: "e.g., 2018-2020",
                labelCompany: "COMPANY (Name & Place):",
                placeholderCompany: "e.g., ABC Corp, Delhi",
                labelDesignation: "DESIGNATION (Last):",
                placeholderDesignation: "e.g., Senior Developer",
                labelLastGrossSalary: "LAST GROSS SALARY:",
                placeholderLastGrossSalary: "e.g., ₹50,000",
                labelReasonsForLeaving: "REASONS FOR LEAVING:",
                placeholderReasonsForLeaving: "e.g., Better opportunity",

                sectionTitleReference: "REFERENCE CONTACT DETAILS",
                labelRefName: "Name:",
                placeholderRefName: "Enter reference name",
                labelRefCompany: "Company:",
                placeholderRefCompany: "Enter reference company",
                labelRefAddress: "Address:",
                placeholderRefAddress: "Enter reference address",
                labelRefPost: "Post:",
                placeholderRefPost: "Enter reference post",
                labelRefTelephoneNumber: "Telephone Number:",
                placeholderRefTelephoneNumber: "e.g., 011-12345678",
                labelRefContactNo: "Contact No:",
                placeholderRefContactNo: "e.g., 9876543210",

                sectionTitleLanguage: "UNDERSTANDING OF LANGUAGE",
                labelLanguageEnglish: "English",
                labelLanguageNepali: "Nepali",
                labelLanguageHindi: "Hindi",
                labelRead: "Read",
                labelWrite: "Write",
                labelSpeak: "Speak",

                submitBtn: "Submit Form",
                imagePreviewTitle: "Generated Form Image:",
                downloadImage: "Download Image",
                switchLang: "Switch to Hindi",
                imageMainTitle: "PERSONAL DETAILS FORM",
                imageSubtitle: "", // No subtitle for this form
                errorMsg: "Failed to generate image. Please try again.",
                okBtn: "OK"
            },
            hi: {
                mainTitle: "व्यक्तिगत विवरण फॉर्म",
                hrToComplete: "एचआर द्वारा भरा जाना है",
                employeeCode: "कर्मचारी कोड:",

                sectionTitleEmployee: "कर्मचारी विवरण",
                labelEmployeeName: "नाम:",
                placeholderEmployeeName: "कर्मचारी का नाम दर्ज करें",
                labelFatherName: "पिता का नाम:",
                placeholderFatherName: "पिता का नाम दर्ज करें",
                labelDateOfBirth: "जन्म तिथि:",
                labelAge: "आयु:",
                placeholderAge: "उदाहरण: 30",
                labelAreaOfService: "सेवा क्षेत्र:",
                placeholderAreaOfService: "उदाहरण: बिक्री",
                labelCaste: "जाति:",
                placeholderCaste: "जाति दर्ज करें",
                labelBloodGroup: "रक्त समूह:",
                placeholderBloodGroup: "उदाहरण: ए+",
                labelReligion: "धर्म:",
                placeholderReligion: "उदाहरण: हिंदू",
                labelGender: "लिंग:",
                optionSelect: "चुनें",
                optionMale: "पुरुष",
                optionFemale: "महिला",
                optionOther: "अन्य",
                labelMaritalStatus: "वैवाहिक स्थिति:",
                optionSingle: "अविवाहित",
                optionMarried: "विवाहित",
                optionDivorced: "तलाकशुदा",
                optionWidowed: "विधवा",
                labelWorkExperience: "कार्य अनुभव:",
                placeholderWorkExperience: "उदाहरण: बिक्री में 2 साल",
                labelContactNo: "संपर्क नंबर:",
                placeholderContactNo: "उदाहरण: 9876543210",
                labelPersonalEmailId: "व्यक्तिगत ईमेल आईडी:",
                placeholderPersonalEmailId: "उदाहरण: email@example.com",
                labelPresentAddress: "वर्तमान पता:",
                placeholderPresentAddress: "वर्तमान पता दर्ज करें",
                labelPermanentAddress: "स्थायी पता:",
                placeholderPermanentAddress: "स्थायी पता दर्ज करें",

                sectionTitleEmergency: "आपातकालीन संपर्क विवरण",
                labelECFullName: "पूरा नाम:",
                placeholderECFullName: "उदाहरण: जेन डो",
                labelECRelationship: "संबंध:",
                placeholderECRelationship: "उदाहरण: पति/पत्नी",
                labelECAddress: "पता:",
                placeholderECAddress: "आपातकालीन संपर्क पता दर्ज करें",
                labelECContactNo: "संपर्क नंबर:",
                placeholderECContactNo: "उदाहरण: 9876543210",
                labelECNote: "नोट:",
                placeholderECNote: "कोई विशेष नोट्स",

                sectionTitlePost: "पद विवरण",
                labelLocation: "स्थान:",
                placeholderLocation: "उदाहरण: दिल्ली",
                labelDepartment: "विभाग:",
                placeholderDepartment: "उदाहरण: एचआर",
                labelJobDesignation: "पदनाम:",
                placeholderJobDesignation: "उदाहरण: प्रबंधक",
                labelJoiningDate: "ज्वाइनिंग तिथि:",
                labelCompanyId: "कंपनी आईडी:",
                placeholderCompanyId: "उदाहरण: C12345",
                labelSkypeId: "स्काइप आईडी:",
                placeholderSkypeId: "उदाहरण: live:john.doe",
                labelTechnicalSkills: "तकनीकी कौशल:",
                placeholderTechnicalSkills: "उदाहरण: जावास्क्रिप्ट, पायथन, एसक्यूएल",

                sectionTitleBank: "बैंक विवरण - कृपया सुनिश्चित करें कि आपने एक पूर्ण और हस्ताक्षरित फॉर्म भरा है",
                labelAccountHoldersName: "खाताधारक का नाम:",
                placeholderAccountHoldersName: "खाताधारक का नाम दर्ज करें",
                labelAccountNumber: "खाता संख्या:",
                placeholderAccountNumber: "खाता संख्या दर्ज करें",
                labelNameOfBank: "बैंक का नाम:",
                placeholderNameOfBank: "बैंक का नाम दर्ज करें",
                labelBankAccountType: "बैंक खाता प्रकार:",
                placeholderBankAccountType: "उदाहरण: बचत, चालू",
                labelBranchCity: "शाखा (शहर):",
                placeholderBranchCity: "शाखा शहर दर्ज करें",
                labelPanNo: "पैन नंबर:",
                placeholderPanNo: "पैन नंबर दर्ज करें",
                labelBranchCodeIFSCNo: "शाखा कोड (आईएफएससी) नंबर:",
                placeholderBranchCodeIFSCNo: "आईएफएससी कोड दर्ज करें",

                sectionTitleWorkExperience: "कार्य अनुभव विवरण",
                labelDuration: "अवधि (वर्ष से वर्ष/माह):",
                placeholderDuration: "उदाहरण: 2018-2020",
                labelCompany: "कंपनी (नाम और स्थान):",
                placeholderCompany: "उदाहरण: एबीसी कॉर्प, दिल्ली",
                labelDesignation: "पदनाम (अंतिम):",
                placeholderDesignation: "उदाहरण: वरिष्ठ डेवलपर",
                labelLastGrossSalary: "अंतिम सकल वेतन:",
                placeholderLastGrossSalary: "उदाहरण: ₹50,000",
                labelReasonsForLeaving: "छोड़ने के कारण:",
                placeholderReasonsForLeaving: "उदाहरण: बेहतर अवसर",

                sectionTitleReference: "संदर्भ संपर्क विवरण",
                labelRefName: "नाम:",
                placeholderRefName: "संदर्भ नाम दर्ज करें",
                labelRefCompany: "कंपनी:",
                placeholderRefCompany: "संदर्भ कंपनी दर्ज करें",
                labelRefAddress: "पता:",
                placeholderRefAddress: "संदर्भ पता दर्ज करें",
                labelRefPost: "पद:",
                placeholderRefPost: "संदर्भ पद दर्ज करें",
                labelRefTelephoneNumber: "टेलीफोन नंबर:",
                placeholderRefTelephoneNumber: "उदाहरण: 011-12345678",
                labelRefContactNo: "संपर्क नंबर:",
                placeholderRefContactNo: "उदाहरण: 9876543210",

                sectionTitleLanguage: "भाषा की समझ",
                labelLanguageEnglish: "अंग्रेजी",
                labelLanguageNepali: "नेपाली",
                labelLanguageHindi: "हिंदी",
                labelRead: "पढ़ना",
                labelWrite: "लिखना",
                labelSpeak: "बोलना",

                submitBtn: "फॉर्म जमा करें",
                imagePreviewTitle: "जनरेट की गई फॉर्म छवि:",
                downloadImage: "छवि डाउनलोड करें",
                switchLang: "अंग्रेजी में स्विच करें",
                imageMainTitle: "व्यक्तिगत विवरण फॉर्म",
                imageSubtitle: "", // No subtitle for this form
                errorMsg: "छवि बनाने में विफल। कृपया पुनः प्रयास करें।",
                okBtn: "ठीक है"
            }
        };

        let currentLang = 'en'; // Default language

        // Get references to DOM elements
        const langToggle = document.getElementById('langToggle');
        const mainTitle = document.getElementById('mainTitle');
        const dataForm = document.getElementById('dataForm');
        const submitBtn = document.getElementById('submitBtn');
        const imageResultDiv = document.getElementById('imageResult');
        const generatedImage = document.getElementById('generatedImage');
        const downloadImageButton = document.getElementById('downloadImage');
        const imagePreviewTitle = document.getElementById('imagePreviewTitle');
        const imageSourceDiv = document.getElementById('imageSource');
        const imageSourceMainTitle = document.getElementById('imageSourceMainTitle');
        const hrToComplete = document.getElementById('hrToComplete');
        const employeeCode = document.getElementById('employeeCode');
        const imageSourceContent = document.getElementById('imageSourceContent');

        // Helper function to create a cell with label and value
        function createCell(label, value, className = '') {
            const cell = document.createElement('div');
            cell.className = `image-cell ${className}`;
            cell.innerHTML = `<span class="image-label">${label}</span><span class="image-value">${value}</span>`;
            return cell;
        }

        // Helper function to create a section within the image
        function createImageSection(titleText, contentHtml) {
            const section = document.createElement('div');
            section.className = 'image-section';
            section.innerHTML = `<div class="image-section-title">${titleText}</div><div class="image-section-content">${contentHtml}</div>`;
            return section;
        }

        // Function to update text content based on current language
        function updateContent() {
            const lang = translations[currentLang];

            mainTitle.textContent = lang.mainTitle;
            langToggle.textContent = lang.switchLang;
            submitBtn.textContent = lang.submitBtn;
            imagePreviewTitle.textContent = lang.imagePreviewTitle;
            downloadImageButton.textContent = lang.downloadImage;
            imageSourceMainTitle.textContent = lang.imageMainTitle;
            hrToComplete.textContent = lang.hrToComplete;
            employeeCode.textContent = lang.employeeCode + (document.getElementById('employeeCode').dataset.value || '');


            // Update section titles
            document.getElementById('sectionTitleEmployee').textContent = lang.sectionTitleEmployee;
            document.getElementById('sectionTitleEmergency').textContent = lang.sectionTitleEmergency;
            document.getElementById('sectionTitlePost').textContent = lang.sectionTitlePost;
            document.getElementById('sectionTitleBank').textContent = lang.sectionTitleBank;
            document.getElementById('sectionTitleWorkExperience').textContent = lang.sectionTitleWorkExperience;
            document.getElementById('sectionTitleReference').textContent = lang.sectionTitleReference;
            document.getElementById('sectionTitleLanguage').textContent = lang.sectionTitleLanguage;


            // Update form labels and placeholders
            document.getElementById('labelEmployeeName').textContent = lang.labelEmployeeName;
            document.getElementById('employeeName').placeholder = lang.placeholderEmployeeName;
            document.getElementById('labelFatherName').textContent = lang.labelFatherName;
            document.getElementById('fatherName').placeholder = lang.placeholderFatherName;
            document.getElementById('labelDateOfBirth').textContent = lang.labelDateOfBirth;
            document.getElementById('labelAge').textContent = lang.labelAge;
            document.getElementById('age').placeholder = lang.placeholderAge;
            document.getElementById('labelAreaOfService').textContent = lang.labelAreaOfService;
            document.getElementById('areaOfService').placeholder = lang.placeholderAreaOfService;
            document.getElementById('labelCaste').textContent = lang.labelCaste;
            document.getElementById('caste').placeholder = lang.placeholderCaste;
            document.getElementById('labelBloodGroup').textContent = lang.labelBloodGroup;
            document.getElementById('bloodGroup').placeholder = lang.placeholderBloodGroup;
            document.getElementById('labelReligion').textContent = lang.labelReligion;
            document.getElementById('religion').placeholder = lang.placeholderReligion;
            document.getElementById('labelGender').textContent = lang.labelGender;
            document.querySelector('#gender option[value=""]').textContent = lang.optionSelect;
            document.querySelector('#gender option[value="male"]').textContent = lang.optionMale;
            document.querySelector('#gender option[value="female"]').textContent = lang.optionFemale;
            document.querySelector('#gender option[value="other"]').textContent = lang.optionOther;
            document.getElementById('labelMaritalStatus').textContent = lang.labelMaritalStatus;
            document.querySelector('#maritalStatus option[value=""]').textContent = lang.optionSelect;
            document.querySelector('#maritalStatus option[value="single"]').textContent = lang.optionSingle;
            document.querySelector('#maritalStatus option[value="married"]').textContent = lang.optionMarried;
            document.querySelector('#maritalStatus option[value="divorced"]').textContent = lang.optionDivorced;
            document.querySelector('#maritalStatus option[value="widowed"]').textContent = lang.optionWidowed;
            document.getElementById('labelWorkExperience').textContent = lang.labelWorkExperience;
            document.getElementById('workExperience').placeholder = lang.placeholderWorkExperience;
            document.getElementById('labelContactNo').textContent = lang.labelContactNo;
            document.getElementById('contactNo').placeholder = lang.placeholderContactNo;
            document.getElementById('labelPersonalEmailId').textContent = lang.labelPersonalEmailId;
            document.getElementById('personalEmailId').placeholder = lang.placeholderPersonalEmailId;
            document.getElementById('labelPresentAddress').textContent = lang.labelPresentAddress;
            document.getElementById('presentAddress').placeholder = lang.placeholderPresentAddress;
            document.getElementById('labelPermanentAddress').textContent = lang.labelPermanentAddress;
            document.getElementById('permanentAddress').placeholder = lang.placeholderPermanentAddress;

            document.getElementById('labelECFullName').textContent = lang.labelECFullName;
            document.getElementById('ecFullName').placeholder = lang.placeholderECFullName;
            document.getElementById('labelECRelationship').textContent = lang.labelECRelationship;
            document.getElementById('ecRelationship').placeholder = lang.placeholderECRelationship;
            document.getElementById('labelECAddress').textContent = lang.labelECAddress;
            document.getElementById('ecAddress').placeholder = lang.placeholderECAddress;
            document.getElementById('labelECContactNo').textContent = lang.labelECContactNo;
            document.getElementById('ecContactNo').placeholder = lang.placeholderECContactNo;
            document.getElementById('labelECNote').textContent = lang.labelECNote;
            document.getElementById('ecNote').placeholder = lang.placeholderECNote;

            document.getElementById('labelLocation').textContent = lang.labelLocation;
            document.getElementById('location').placeholder = lang.placeholderLocation;
            document.getElementById('labelDepartment').textContent = lang.labelDepartment;
            document.getElementById('department').placeholder = lang.placeholderDepartment;
            document.getElementById('labelJobDesignation').textContent = lang.labelJobDesignation;
            document.getElementById('jobDesignation').placeholder = lang.placeholderJobDesignation;
            document.getElementById('labelJoiningDate').textContent = lang.labelJoiningDate;
            document.getElementById('labelCompanyId').textContent = lang.labelCompanyId;
            document.getElementById('companyId').placeholder = lang.placeholderCompanyId;
            document.getElementById('labelSkypeId').textContent = lang.labelSkypeId;
            document.getElementById('skypeId').placeholder = lang.placeholderSkypeId;
            document.getElementById('labelTechnicalSkills').textContent = lang.labelTechnicalSkills;
            document.getElementById('technicalSkills').placeholder = lang.placeholderTechnicalSkills;

            document.getElementById('labelAccountHoldersName').textContent = lang.labelAccountHoldersName;
            document.getElementById('accountHoldersName').placeholder = lang.placeholderAccountHoldersName;
            document.getElementById('labelAccountNumber').textContent = lang.labelAccountNumber;
            document.getElementById('accountNumber').placeholder = lang.placeholderAccountNumber;
            document.getElementById('labelNameOfBank').textContent = lang.labelNameOfBank;
            document.getElementById('nameOfBank').placeholder = lang.placeholderNameOfBank;
            document.getElementById('labelBankAccountType').textContent = lang.labelBankAccountType;
            document.getElementById('bankAccountType').placeholder = lang.placeholderBankAccountType;
            document.getElementById('labelBranchCity').textContent = lang.labelBranchCity;
            document.getElementById('branchCity').placeholder = lang.placeholderBranchCity;
            document.getElementById('labelPanNo').textContent = lang.labelPanNo;
            document.getElementById('panNo').placeholder = lang.placeholderPanNo;
            document.getElementById('labelBranchCodeIFSCNo').textContent = lang.labelBranchCodeIFSCNo;
            document.getElementById('branchCodeIFSCNo').placeholder = lang.placeholderBranchCodeIFSCNo;

            document.getElementById('labelDuration').textContent = lang.labelDuration;
            document.getElementById('duration').placeholder = lang.placeholderDuration;
            document.getElementById('labelCompany').textContent = lang.labelCompany;
            document.getElementById('company').placeholder = lang.placeholderCompany;
            document.getElementById('labelDesignation').textContent = lang.labelDesignation;
            document.getElementById('designation').placeholder = lang.placeholderDesignation;
            document.getElementById('labelLastGrossSalary').textContent = lang.labelLastGrossSalary;
            document.getElementById('lastGrossSalary').placeholder = lang.placeholderLastGrossSalary;
            document.getElementById('labelReasonsForLeaving').textContent = lang.labelReasonsForLeaving;
            document.getElementById('reasonsForLeaving').placeholder = lang.placeholderReasonsForLeaving;

            document.getElementById('labelRefName').textContent = lang.labelRefName;
            document.getElementById('refName').placeholder = lang.placeholderRefName;
            document.getElementById('labelRefCompany').textContent = lang.labelRefCompany;
            document.getElementById('refCompany').placeholder = lang.placeholderRefCompany;
            document.getElementById('labelRefAddress').textContent = lang.labelRefAddress;
            document.getElementById('refAddress').placeholder = lang.placeholderRefAddress;
            document.getElementById('labelRefPost').textContent = lang.labelRefPost;
            document.getElementById('refPost').placeholder = lang.placeholderRefPost;
            document.getElementById('labelRefTelephoneNumber').textContent = lang.labelRefTelephoneNumber;
            document.getElementById('refTelephoneNumber').placeholder = lang.placeholderRefTelephoneNumber;
            document.getElementById('labelRefContactNo').textContent = lang.labelRefContactNo;
            document.getElementById('refContactNo').placeholder = lang.placeholderRefContactNo;

            document.getElementById('labelLanguageEnglish').textContent = lang.labelLanguageEnglish;
            document.getElementById('labelLanguageNepali').textContent = lang.labelLanguageNepali;
            document.getElementById('labelLanguageHindi').textContent = lang.labelLanguageHindi;
            // For checkboxes, we need to update the text labels next to them if they are separate
            // Assuming the labels are linked by 'for' attribute, updating the main label is enough.
            // If they are not, you'd need to target them specifically.
        }

        // Initial content update
        updateContent();

        // Language toggle functionality
        langToggle.addEventListener('click', () => {
            currentLang = currentLang === 'en' ? 'hi' : 'en';
            updateContent();
        });

        // Add event listener for form submission
        dataForm.addEventListener('submit', async function(event) {
            event.preventDefault(); // Prevent default form submission

            // Get all form data
            const formData = {
                employeeName: document.getElementById('employeeName').value,
                fatherName: document.getElementById('fatherName').value,
                dateOfBirth: document.getElementById('dateOfBirth').value,
                age: document.getElementById('age').value,
                areaOfService: document.getElementById('areaOfService').value,
                caste: document.getElementById('caste').value,
                bloodGroup: document.getElementById('bloodGroup').value,
                religion: document.getElementById('religion').value,
                gender: document.getElementById('gender').value,
                maritalStatus: document.getElementById('maritalStatus').value,
                workExperience: document.getElementById('workExperience').value,
                contactNo: document.getElementById('contactNo').value,
                personalEmailId: document.getElementById('personalEmailId').value,
                presentAddress: document.getElementById('presentAddress').value,
                permanentAddress: document.getElementById('permanentAddress').value,

                ecFullName: document.getElementById('ecFullName').value,
                ecRelationship: document.getElementById('ecRelationship').value,
                ecAddress: document.getElementById('ecAddress').value,
                ecContactNo: document.getElementById('ecContactNo').value,
                ecNote: document.getElementById('ecNote').value,

                location: document.getElementById('location').value,
                department: document.getElementById('department').value,
                jobDesignation: document.getElementById('jobDesignation').value,
                joiningDate: document.getElementById('joiningDate').value,
                companyId: document.getElementById('companyId').value,
                skypeId: document.getElementById('skypeId').value,
                technicalSkills: document.getElementById('technicalSkills').value,

                accountHoldersName: document.getElementById('accountHoldersName').value,
                accountNumber: document.getElementById('accountNumber').value,
                nameOfBank: document.getElementById('nameOfBank').value,
                bankAccountType: document.getElementById('bankAccountType').value,
                branchCity: document.getElementById('branchCity').value,
                panNo: document.getElementById('panNo').value,
                branchCodeIFSCNo: document.getElementById('branchCodeIFSCNo').value,

                duration: document.getElementById('duration').value,
                company: document.getElementById('company').value,
                designation: document.getElementById('designation').value,
                lastGrossSalary: document.getElementById('lastGrossSalary').value,
                reasonsForLeaving: document.getElementById('reasonsForLeaving').value,

                refName: document.getElementById('refName').value,
                refCompany: document.getElementById('refCompany').value,
                refAddress: document.getElementById('refAddress').value,
                refPost: document.getElementById('refPost').value,
                refTelephoneNumber: document.getElementById('refTelephoneNumber').value,
                refContactNo: document.getElementById('refContactNo').value,

                languageEnglishRead: document.getElementById('languageEnglishRead').checked ? 'Yes' : 'No',
                languageEnglishWrite: document.getElementById('languageEnglishWrite').checked ? 'Yes' : 'No',
                languageEnglishSpeak: document.getElementById('languageEnglishSpeak').checked ? 'Yes' : 'No',
                languageNepaliRead: document.getElementById('languageNepaliRead').checked ? 'Yes' : 'No',
                languageNepaliWrite: document.getElementById('languageNepaliWrite').checked ? 'Yes' : 'No',
                languageNepaliSpeak: document.getElementById('languageNepaliSpeak').checked ? 'Yes' : 'No',
                languageHindiRead: document.getElementById('languageHindiRead').checked ? 'Yes' : 'No',
                languageHindiWrite: document.getElementById('languageHindiWrite').checked ? 'Yes' : 'No',
                languageHindiSpeak: document.getElementById('languageHindiSpeak').checked ? 'Yes' : 'No',
            };

            // Clear previous content in imageSourceContent
            imageSourceContent.innerHTML = '';

            const lang = translations[currentLang];

            // Employee Details Section
            let employeeDetailsContent = `
                <div class="image-row">
                    ${createCell(lang.labelEmployeeName, formData.employeeName, 'half').outerHTML}
                    ${createCell(lang.labelFatherName, formData.fatherName, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelDateOfBirth, formData.dateOfBirth, 'half').outerHTML}
                    ${createCell(lang.labelAge, formData.age, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelAreaOfService, formData.areaOfService, 'half').outerHTML}
                    ${createCell(lang.labelCaste, formData.caste, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelBloodGroup, formData.bloodGroup, 'half').outerHTML}
                    ${createCell(lang.labelReligion, formData.religion, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelGender, formData.gender, 'half').outerHTML}
                    ${createCell(lang.labelMaritalStatus, formData.maritalStatus, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelWorkExperience, formData.workExperience, 'full').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelContactNo, formData.contactNo, 'half').outerHTML}
                    ${createCell(lang.labelPersonalEmailId, formData.personalEmailId, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelPresentAddress, formData.presentAddress, 'full').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelPermanentAddress, formData.permanentAddress, 'full').outerHTML}
                </div>
            `;
            imageSourceContent.appendChild(createImageSection(lang.sectionTitleEmployee, employeeDetailsContent));

            // Emergency Contact Details Section
            let emergencyContactContent = `
                <div class="image-row">
                    ${createCell(lang.labelECFullName, formData.ecFullName, 'half').outerHTML}
                    ${createCell(lang.labelECRelationship, formData.ecRelationship, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelECAddress, formData.ecAddress, 'full').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelECContactNo, formData.ecContactNo, 'half').outerHTML}
                    ${createCell(lang.labelECNote, formData.ecNote, 'half').outerHTML}
                </div>
            `;
            imageSourceContent.appendChild(createImageSection(lang.sectionTitleEmergency, emergencyContactContent));

            // Post Details Section
            let postDetailsContent = `
                <div class="image-row">
                    ${createCell(lang.labelLocation, formData.location, 'half').outerHTML}
                    ${createCell(lang.labelDepartment, formData.department, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelJobDesignation, formData.jobDesignation, 'half').outerHTML}
                    ${createCell(lang.labelJoiningDate, formData.joiningDate, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelCompanyId, formData.companyId, 'half').outerHTML}
                    ${createCell(lang.labelSkypeId, formData.skypeId, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelTechnicalSkills, formData.technicalSkills, 'full').outerHTML}
                </div>
            `;
            imageSourceContent.appendChild(createImageSection(lang.sectionTitlePost, postDetailsContent));

            // Bank Details Section
            let bankDetailsContent = `
                <div class="image-row">
                    ${createCell(lang.labelAccountHoldersName, formData.accountHoldersName, 'half').outerHTML}
                    ${createCell(lang.labelAccountNumber, formData.accountNumber, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelNameOfBank, formData.nameOfBank, 'half').outerHTML}
                    ${createCell(lang.labelBankAccountType, formData.bankAccountType, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelBranchCity, formData.branchCity, 'half').outerHTML}
                    ${createCell(lang.labelPanNo, formData.panNo, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelBranchCodeIFSCNo, formData.branchCodeIFSCNo, 'full').outerHTML}
                </div>
            `;
            imageSourceContent.appendChild(createImageSection(lang.sectionTitleBank, bankDetailsContent));

            // Work Experience Details Section
            let workExperienceContent = `
                <div class="image-row">
                    ${createCell(lang.labelDuration, formData.duration, 'quarter').outerHTML}
                    ${createCell(lang.labelCompany, formData.company, 'quarter').outerHTML}
                    ${createCell(lang.labelDesignation, formData.designation, 'quarter').outerHTML}
                    ${createCell(lang.labelLastGrossSalary, formData.lastGrossSalary, 'quarter').outerHTML}
                    ${createCell(lang.labelReasonsForLeaving, formData.reasonsForLeaving, 'quarter').outerHTML}
                </div>
            `;
            imageSourceContent.appendChild(createImageSection(lang.sectionTitleWorkExperience, workExperienceContent));

            // Reference Contact Details Section
            let referenceContactContent = `
                <div class="image-row">
                    ${createCell(lang.labelRefName, formData.refName, 'half').outerHTML}
                    ${createCell(lang.labelRefCompany, formData.refCompany, 'half').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelRefAddress, formData.refAddress, 'full').outerHTML}
                </div>
                <div class="image-row">
                    ${createCell(lang.labelRefPost, formData.refPost, 'third').outerHTML}
                    ${createCell(lang.labelRefTelephoneNumber, formData.refTelephoneNumber, 'third').outerHTML}
                    ${createCell(lang.labelRefContactNo, formData.refContactNo, 'third').outerHTML}
                </div>
            `;
            imageSourceContent.appendChild(createImageSection(lang.sectionTitleReference, referenceContactContent));

            // Understanding of Language Section
            let languageContent = `
                <table class="language-table">
                    <thead>
                        <tr>
                            <th>Language</th>
                            <th>${lang.labelRead}</th>
                            <th>${lang.labelWrite}</th>
                            <th>${lang.labelSpeak}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>${lang.labelLanguageEnglish}</td>
                            <td>${formData.languageEnglishRead}</td>
                            <td>${formData.languageEnglishWrite}</td>
                            <td>${formData.languageEnglishSpeak}</td>
                        </tr>
                        <tr>
                            <td>${lang.labelLanguageNepali}</td>
                            <td>${formData.languageNepaliRead}</td>
                            <td>${formData.languageNepaliWrite}</td>
                            <td>${formData.languageNepaliSpeak}</td>
                        </tr>
                        <tr>
                            <td>${lang.labelLanguageHindi}</td>
                            <td>${formData.languageHindiRead}</td>
                            <td>${formData.languageHindiWrite}</td>
                            <td>${formData.languageHindiSpeak}</td>
                        </tr>
                    </tbody>
                </table>
            `;
            imageSourceContent.appendChild(createImageSection(lang.sectionTitleLanguage, languageContent));

            // Add the PHOTO box to the image source
            const photoBox = document.createElement('div');
            photoBox.className = 'photo-box';
            photoBox.textContent = 'PHOTO';
            // Insert it at a specific logical position, e.g., after HR details
            imageSourceDiv.insertBefore(photoBox, imageSourceContent.firstChild);


            // Temporarily make the imageSourceDiv visible off-screen for html2canvas to render correctly
            imageSourceDiv.style.position = 'absolute';
            imageSourceDiv.style.left = '-9999px';
            imageSourceDiv.style.top = '-9999px';
            imageSourceDiv.style.display = 'flex';
            imageSourceDiv.style.height = 'auto'; // Allow height to adjust for content

            try {
                // Use html2canvas to render the imageSourceDiv into a canvas
                const canvas = await html2canvas(imageSourceDiv, {
                    scale: 2, // Increase scale for better image quality (e.g., 2x resolution)
                    useCORS: true,
                    backgroundColor: null, // Let CSS background apply
                    logging: false
                });

                // Convert the canvas content to a PNG data URL
                const imageDataUrl = canvas.toDataURL('image/png');

                // Display the generated image
                generatedImage.src = imageDataUrl;
                imageResultDiv.classList.remove('hidden'); // Show the image result section

                // Set the download link
                downloadImageButton.href = imageDataUrl;
                downloadImageButton.download = `personal_details_form_${Date.now()}.png`; // Unique filename

            } catch (error) {
                console.error('Error generating image:', error);
                // Use a custom message box instead of alert()
                const errorMessageDiv = document.createElement('div');
                errorMessageDiv.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50';
                errorMessageDiv.innerHTML = `
                    <div class="bg-white p-6 rounded-lg shadow-xl text-center">
                        <p class="text-red-600 mb-4">${translations[currentLang].errorMsg}</p>
                        <button class="bg-blue-500 text-white px-4 py-2 rounded" onclick="this.closest('.fixed').remove()">${translations[currentLang].okBtn}</button>
                    </div>
                `;
                document.body.appendChild(errorMessageDiv);
            } finally {
                // Hide the imageSourceDiv again after rendering
                imageSourceDiv.style.display = 'none';
                // Remove the photo box after rendering to clean up
                if (photoBox.parentNode) {
                    photoBox.parentNode.removeChild(photoBox);
                }
            }
        });
    </script>
</body>
</html>

